$bp-evenGrid-2col: 40em;
$bp-evenGrid-3col: 65em;
$bp-evenGrid-4col: 90em;

$base-ratio: 80.27%;
$item-inner-padding: 0.9em;

.even-grid {
  // Reset list styles
  list-style: none;
  padding: 0;
  margin: 0;

  text-align: center;

  // Contain floats
  width: 100%;
  float: left;

  // The whole list also has a border,
  // to make it even all the way around.
  // Otherwise we'd have to do a bunch of
  // nth-child craziness for every breakpoint
  border: 0.6em solid white;
  background: white;
}

.even-grid--item {
  @include sb-media($bp-evenGrid-2col) {
    // Put items side-by-side, 2 across
    width: 50%;
    float: left;
  }

  @include sb-media($bp-evenGrid-3col) {
    // Put items side-by-side, 3 across
    // Rounding down, to be safe.
    width: 33.32%;
  }
  @include sb-media($bp-evenGrid-4col) {
    // Put items side-by-side, 4 across
    width: 25%;
  }
}

.even-grid--item-inner-wrapper {
  @include sb-media($bp-evenGrid-2col) {
    position: relative;

    // Activate intrinsic ratio powers
    height: 0;
    padding-bottom: $base-ratio;
  }
}

.even-grid--contents {
  padding: $item-inner-padding;
  border: 0.6em solid white;
  background-color: #B6E1E8;
  color: #265e67;

  // IE7 doesn't want to show a pointer
  // cursor since the <a> is around a block-level
  // element, so let's force it.
  cursor: pointer;

  @include sb-media($bp-evenGrid-2col) {
    // Activate intrinsic ratio powers
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
  }
}

.even-grid--contents_has-image {
  // Remove padding,
  // so image can touch bottom.
  // Stop laughing.
  padding-bottom: 0;
}

.even-grid--image-wrapper {
  @include sb-media($bp-evenGrid-2col) {
    position: absolute;
    top: $item-inner-padding;
    left: $item-inner-padding;
    bottom: 0;
    right: $item-inner-padding;
  }
}

.even-grid--image {
  width: 100%;
  max-width: 25em;

  // Center
  margin: 0 auto;

  // Prevent space at bottom
  display: block;

  @include sb-media($bp-evenGrid-2col) {
    // No bigger than natural width
    max-width: 90%;

    // Attach to bottom
    position: absolute;
    bottom: 0;

    // Center absolute element
    left: 0;
    right: 0;
  }
}
